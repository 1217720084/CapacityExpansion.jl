<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Homework: Modeling Exercise · CapacityExpansion.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../"><img class="logo" src="../assets/logo.png" alt="CapacityExpansion.jl logo"/></a><h1>CapacityExpansion.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Introduction</a></li><li><a class="toctext" href="../quickstart/">Quickstart</a></li><li><a class="toctext" href="../workflow/">Workflow</a></li><li><span class="toctext">Data</span><ul><li><a class="toctext" href="../preparing_clust_data/">Preparing ClustData</a></li><li><a class="toctext" href="../preparing_opt_cep_data/">Preparing OptDataCEP</a></li><li><a class="toctext" href="../csv_structure/">Provided Data &amp; Personal Data Setup</a></li><li><a class="toctext" href="../README_GER_18/">GER-18</a></li><li><a class="toctext" href="../README_GER_1/">GER-1</a></li><li><a class="toctext" href="../README_CA_14/">CA-14</a></li><li><a class="toctext" href="../README_CA_1/">CA-1</a></li><li><a class="toctext" href="../README_TX_1/">TX-1</a></li></ul></li><li><span class="toctext">Optimization</span><ul><li><a class="toctext" href="../opt_cep/">Optimization Problem Formulation</a></li><li><a class="toctext" href="../results_opt/">Result</a></li><li><a class="toctext" href="../opt_cep_examples/">Examples</a></li></ul></li><li><span class="toctext">Teaching</span><ul><li><a class="toctext" href="../teaching/">Teaching</a></li><li class="current"><a class="toctext" href>Homework: Modeling Exercise</a><ul class="internal"><li><a class="toctext" href="#Initial-instructions:-1">Initial instructions:</a></li><li><a class="toctext" href="#Part-1:-Getting-Set-Up-1">Part 1: Getting Set Up</a></li><li><a class="toctext" href="#Part-2-–-Comparing-Policies-1">Part 2 – Comparing Policies</a></li><li><a class="toctext" href="#Part-3-–-Testing-Assumptions-1">Part 3 – Testing Assumptions</a></li><li><a class="toctext" href="#Part-4-–-Storage-Sensitivities-1">Part 4 – Storage Sensitivities</a></li><li><a class="toctext" href="#Part-5-–-Final-Analysis-1">Part 5 – Final Analysis</a></li></ul></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Teaching</li><li><a href>Homework: Modeling Exercise</a></li></ul><a class="edit-page" href="https://github.com/YoungFaithful/CapacityExpansion.jl/blob/master/docs/src/homework.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Homework: Modeling Exercise</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Homework:-Modeling-Exercise-1" href="#Homework:-Modeling-Exercise-1">Homework: Modeling Exercise</a></h1><p>Copyright 2019, Patricia Levi, Elias Kuepper, and contributors</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><pre><code class="language-none">The corresponding files can be found in the folder [.../CapacityExpansion/teaching/](https://github.com/YoungFaithful/CapacityExpansion.jl/tree/dev/teaching)</code></pre></div></div><p>MS&amp;E 394 Spring 2019</p><p>Advanced Methods in Modeling for Climate and Energy Policy at Stanford University</p><p>Modeling Exercise: Capacity Expansion Planning</p><p>Due: May 6, 2019, at 10pm</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>This problem set serves to reinforce concepts from the class regarding capacity expansion modeling for electricity. It provides hands-on experience in understanding and interpreting the outputs of a typical capacity expansion problem and grappling with the inevitable modeling decisions that must be made. It also requires you to work through a command line interface and understand how to connect to a remote server, valuable skills for working with large models that are hosted beyond your laptop.</p></div></div><h2><a class="nav-anchor" id="Initial-instructions:-1" href="#Initial-instructions:-1">Initial instructions:</a></h2><ul><li>You may work with other students to run the model. However, you are expected to understand everything that is done, write up your own interpretations, and submit your own homework. If you do work together, please note that on your problem set.</li><li>The scripts <span>$homework\_utils.jl$</span> and <span>$homework\_template.jl$</span> contain the code you will need to run to complete this problem set. The first contains helper plotting functions. The second contains examples of the code you need to run to answer the questions below. You will need to add to the provided code to complete this homework, and you should submit a copy of your code along with your writeup.</li><li>This problem set should be written in such a way that you should not need any specific knowledge of Julia to complete it, although it will probably feel easier if you are comfortable with a scripting language. If you find that the contained instructions are insufficient please reach out.</li></ul><h3><a class="nav-anchor" id="Modeling-tool:-Julia-1" href="#Modeling-tool:-Julia-1">Modeling tool: Julia</a></h3><p>Julia is a relatively new programming language that is quickly being adopted for a variety of uses due to its fast run times with large operations. It has a robust set of optimization packages that make it ideal for electricity optimization problems. Elias Kuepper and Holger Teichgraeber have developed a package for Julia that runs a classic capacity expansion model, which we will be using for this problem set.</p><p>In order to run julia-code you can choose from one of the two options:</p><ul><li>use a local julia installation on your computer</li><li>use the julia installation on <a href="https://web.stanford.edu/group/farmshare/cgi-bin/wiki/index.php/FarmShare_2">Farmshare</a>:</li></ul><h2><a class="nav-anchor" id="Part-1:-Getting-Set-Up-1" href="#Part-1:-Getting-Set-Up-1">Part 1: Getting Set Up</a></h2><h3><a class="nav-anchor" id="Option-A:-Farmshare-1" href="#Option-A:-Farmshare-1">Option A: Farmshare</a></h3><p>For those that do not wish to deal with setting it up on their own computer, this homework contains instructions for running this problem set on <a href="https://web.stanford.edu/group/farmshare/cgi-bin/wiki/index.php/FarmShare_2">Farmshare</a>, Stanford&#39;s shared free computing resource. You will need a command line interface (Terminal is the default on Mac; PuTTY, SecureCRT or equivalents on Windows). To view plots interactively, you will need XQuartz installed on Mac, or Xming (or MobaXterm or equivalent) on Windows. The order to get started is:</p><ol><li>Download and install your command line interface if you have a Windows computer (Terminal comes installed on Mac).</li><li>Download and install an X-windows server (XQuartz on Mac, Xming on Windows)</li><li>You may need to re-login or restart your computer for it to work.</li><li>Connect to farmshare</li><li>Launch your command line interface</li><li>Type <code>ssh -Y _YOURSUNETID_@rice.stanford.edu</code>  and follow the prompts</li><li>Load and launch Julia by typing the following at the command line</li></ol><pre><code class="language-none">module load julia
julia</code></pre><ol><li>You can now copy-paste code from the <code>.jl</code> files provided into the Julia command line and they will run. When you call a plotting function, the plot should pop up on your computer.</li><li>To upload or download files (e.g. the plots and csv files saved by the plotting functions) from farmshare it is easiest to have a SFTP client.</li></ol><ul><li>Mac: Download and install <code>Fetch</code></li><li>Windows: Download and install <code>WinSCP</code></li><li>These will allow you to view your files on farmshare, as well as upload and download them. The SFTP client will have you login to Farmshare using the same credentials you used from the command line interface.</li></ul><h3><a class="nav-anchor" id="Option-B:-Your-own-computer-1" href="#Option-B:-Your-own-computer-1">Option B: Your own computer</a></h3><ol><li>Install julia via <a href="http://docs.junolab.org/latest/man/installation/">these instructions</a> on your computer. This problem set is designed to run with a julia version 1.0 or higher. We also recommend to install the <a href="https://junolab.org/">Juno-IDE</a>.</li><li>Open Atom</li><li>File/Open Folder... (Ctr+Shift+O) and select your homework directory</li><li>Open the <code>homework_template.jl</code>-file and run it line by line (Shift+Enter). You can interactively have a look at the results and the plots will be shown within Atom.</li></ol><h3><a class="nav-anchor" id="Overview-of-CapacityExpansion.jl-1" href="#Overview-of-CapacityExpansion.jl-1">Overview of CapacityExpansion.jl</a></h3><p><code>CapacityExpansion.jl</code> is a package that runs a basic capacity expansion model as described in class. The documentation is available <a href="https://youngfaithful.github.io/CapacityExpansion.jl/stable/">here</a>. We are using it to model Germany using 2015 data. In this problem set, the package&#39;s integrated clustering algorithm selects 10 representative days to model the whole year. To begin, we will use it as a greenfield model with no transmission constraints, but it is capable of representing greater detail on these fronts.</p><p>This model runs relatively quickly, although in some configurations it may take a few minutes to run. If you find it taking much longer (say, upwards of 10 minutes), chances are you don&#39;t need to do what you&#39;re doing (or your computer is running very slowly).</p><p>The main function you will be interacting with is run_opt(), which runs the capacity expansion problem. There are two sets of arguments given to this function, separated by a semicolon. The first set are unnamed arguments, and they include the timeseries data (ts_clust_data.clust_data), non-timeseries data (cep_data), and the type of optimizer to use. The second set are named (i.e. identified with <em>argname</em>= <em>your argument value</em>), and this is where we will be adjusting key parameters like the CO2 emissions limit, the transmission constraints, and the type of storage that is available. The <span>$descriptor$</span> argument is for identifying the results of that run in plots and charts, so please name it appropriately.</p><p>There are two ways to run the code:</p><ol><li>Copy pasting the code from your code editor directly into the command line.</li><li>Once you have adjusted the code to your liking, save your edited code and upload it to farmshare, and then call <code>include(&quot;homework\_template.jl&quot;)</code> from Julia. The downside of this approach is that it may be harder to deal with errors, and you will have to download the plots to view them. The upside is that you can go make yourself a cup of coffee while the code runs.</li></ol><p>Recommended to start with (1) and progress to (2) once you think your script does exactly what you want.</p><p>Overview of available plotting scripts</p><p>There are three plotting scripts available to help visualize your results. They each create a bar chart and save it, and they display the underlying data for the plot and save that as a csv. They will save their output in the directory in which you are running Julia (if you followed the farmshare instructions above, that&#39;s your home directory). The provided script shows how to use them. They all take, as a first argument, an array of model results created like this:</p><pre><code class="language-julia">results = [modelresult1, modelresult2, modelresult3]</code></pre><p>As a second argument, they all take an output name that will be used to name the <code>.png</code>-file of the plot and the <code>.csv</code>-file saved by the function. They all save a <code>.png</code>-file of the plot and a <code>.csv</code>-file of the plotted data by default.</p><ol><li><strong>plotgen()</strong></li></ol><p>plots the total generation over the whole year from different resources</p><ol><li><strong>plotcapacity()</strong></li></ol><p>plots the total installed capacity by generation type</p><ol><li><strong>plotcost()</strong></li></ol><p>plots the cost of operating the system for the whole year.</p><p>General workflow</p><p>For each part below, we will follow the following workflow:</p><ol><li>Adjust technology costs if needed (only in the sensitivities section) by creating a new version of the <code>cep\_data</code> variable and providing that to <code>run\_opt()</code> when you call it.</li><li>Run the model several times with different parameter values</li><li>Combine the results together that we wish to compare</li><li>Plot them and inspect the results</li></ol><h2><a class="nav-anchor" id="Part-2-–-Comparing-Policies-1" href="#Part-2-–-Comparing-Policies-1">Part 2 – Comparing Policies</a></h2><p>A policy maker in Germany wants set a CO2 emissions rate limit for their electricity sector for 2050, but they are not sure what level to set. They need you to help them understand the impacts of different possible limits. The highest rate they are considering is 500 kg-CO2 e/MWh, and the lowest is 10 kg-CO2e/MWh. They would like to better understand the tradeoffs between a tighter cap and greater costs.</p><ol><li>Run the model for several different levels of emissions rate limits (the code is set up to do three, but you may do more), and describe how cost, capacity, and generation shift with tighter caps. Include any data or plots needed to make your point</li></ol><h2><a class="nav-anchor" id="Part-3-–-Testing-Assumptions-1" href="#Part-3-–-Testing-Assumptions-1">Part 3 – Testing Assumptions</a></h2><p>The model we are running makes several simplifying assumptions. By default it assumes a greenfield model with no transmission constraints. Before proceeding with our study, we should test a few key assumptions.</p><ol><li>First test the greenfield assumption, which allows the model to build the electricity system from scratch, without considering existing generation. Compare the results with and without existing infrastructure by setting</li></ol><pre><code class="language-julia">infrastructure=Dict{String,Array}(&quot;existing&quot;=&gt;[&quot;all&quot;])</code></pre><p>instead of the default, where only demand is existing</p><pre><code class="language-julia">infrastructure=Dict{String,Array}(&quot;existing&quot;=&gt;[&quot;demand&quot;])</code></pre><p>inside of the model call. You may choose to compare this run with one of the ones done in <em>part 2</em>, but be sure to use the same emissions limit.  Describe the effect, and include any data or plots needed to make your point. Argue whether it makes more sense to run a greenfield or a brownfield model, and use that assumption for the rest of your simulations.</p><ol><li>Next, test the transmission assumption.  The first simulations did not include transmission constraints. Compare the results with and without transmission by setting</li></ol><pre><code class="language-julia">transmission = true #or false</code></pre><p>inside of the model call (<code>false</code> is the default). You may choose to compare this run with one of the ones done in <em>part 2</em>, but be sure to use the same emissions limit. Discuss the effect of including transmission constraints and argue whether the gain in realism is worth the cost in increased computational complexity, and include any data or plots needed to make your point. Use the better assumption for the rest of your simulations.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>There are no right or wrong choices here. We are looking for a reasonable explanation of your choice, and an understanding of the pros, cons, and potential impact on your results.</p></div></div><h2><a class="nav-anchor" id="Part-4-–-Storage-Sensitivities-1" href="#Part-4-–-Storage-Sensitivities-1">Part 4 – Storage Sensitivities</a></h2><p>The policymaker who has posed this question to you is very interested in R&amp;amp;D for battery technology, and is quite the technological optimist regarding their potential. They are curious how declines in storage costs might affect these results. Keep in mind that the effect may be different at different levels of emissions cap stringency.</p><ol><li>First, test the effect of including storage in the model by setting</li></ol><pre><code class="language-julia">storage_type = &quot;simple&quot;
conversion = true</code></pre><p>inside of the model call and keeping this setting for the remainder of this part. This setting makes batteries and hydrogen storage available. Compare the results of this simulation to a previous simulation and comment on the effect, and include any data or plots needed to make your point.</p><ol><li><p>Next, test the effect of declines in the cost of battery storage costs – simulate a range of cost declines. Describe how they affect the outcomes of a relatively high CO2 cap and a relatively low CO2 cap, and include any data or plots needed to make your point.</p></li><li><p>Finally, test the effect of declines in the cost of hydrogen storage costs – simulate a range of cost declines. Describe how they affect the outcomes of a relatively high CO2 cap and a relatively low CO2 cap, and include any data or plots needed to make your point.</p></li></ol><h2><a class="nav-anchor" id="Part-5-–-Final-Analysis-1" href="#Part-5-–-Final-Analysis-1">Part 5 – Final Analysis</a></h2><p>Write a short summary of your recommendations to the policy maker. Describe your findings as they may be relevant to the policy-maker&#39;s given interests, including key differences between the options, describing the impact of important uncertainties, and noting any key limitations to your study. Conduct any final simulations, if you feel there is some combination of parameters that would be useful to explore.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>The question is intended to be broad and open-ended, as this type of broad synthesis is a key part of policy analysis. Use your best judgment to provide insight to this policy-maker, telling them the key features from your results that will inform their upcoming decisions. We are looking for a clear and cogent explanation of a few key results, explained in a way that a non-technical person could understand.</p></div></div><footer><hr/><a class="previous" href="../teaching/"><span class="direction">Previous</span><span class="title">Teaching</span></a></footer></article></body></html>
